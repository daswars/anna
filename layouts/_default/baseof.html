<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ if .IsHome }}{{ .Site.Title }} – {{ i18n "seo_title_suffix" }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
  <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.artist.name }} - {{ with .Site.Language.Params.subtitle }}{{ . }}{{ end }}{{ end }}">

  {{/* Canonical URL */}}
  <link rel="canonical" href="{{ .Permalink }}">

  {{/* Favicons */}}
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  {{/* Open Graph */}}
  <meta property="og:title" content="{{ if .Title }}{{ .Title }}{{ else }}{{ .Site.Title }}{{ end }}">
  <meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.artist.name }} - {{ with .Site.Language.Params.subtitle }}{{ . }}{{ end }}{{ end }}">
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:image" content="{{ "images/og-image.jpg" | absURL }}">
  <meta property="og:locale" content="{{ .Site.Language.Lang }}_{{ upper .Site.Language.Lang }}">
  <meta property="og:site_name" content="{{ .Site.Title }}">

  {{/* Twitter Card */}}
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ if .Title }}{{ .Title }}{{ else }}{{ .Site.Title }}{{ end }}">
  <meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.artist.name }} - {{ with .Site.Language.Params.subtitle }}{{ . }}{{ end }}{{ end }}">
  <meta name="twitter:image" content="{{ "images/og-image.jpg" | absURL }}">

  {{/* Hreflang for multilingual */}}
  {{ if .IsTranslated }}
    {{ range .Translations }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}">
    {{ end }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}">
  {{ end }}
  <link rel="alternate" hreflang="x-default" href="{{ .Site.BaseURL }}">

  {{/* Schema.org Structured Data */}}
  {{ if .IsHome }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "{{ .Site.Params.artist.name }}",
    "jobTitle": "{{ i18n "job_title" }}",
    "description": "{{ i18n "artist_description" }}",
    "url": "{{ .Site.BaseURL }}",
    "image": "{{ "images/og-image.jpg" | absURL }}",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Düsseldorf",
      "addressCountry": "DE"
    },
    "knowsAbout": ["{{ i18n "painting" }}", "{{ i18n "sculpture" }}", "{{ i18n "fine_art" }}"]
  }
  </script>
  {{ end }}

  {{/* Local Fonts - Self-hosted for privacy and CSP compliance */}}
  <link rel="preload" href="/fonts/Cormorant_Garamond/CormorantGaramond-Light.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/fonts/Lora/Lora-Regular.woff2" as="font" type="font/woff2" crossorigin>

  {{/* Preload LCP image on homepage for faster paint */}}
  {{ if .IsHome }}
    {{ $paintings := .Site.Data.paintings.paintings }}
    {{ if $paintings }}
      {{ $firstPainting := index $paintings 0 }}
      {{ $assetPath := replace $firstPainting.image "/images/" "images/" }}
      {{ $image := resources.Get $assetPath }}
      {{ if $image }}
        {{ $thumb400 := $image.Resize "400x webp q55" }}
        <link rel="preload" as="image" href="{{ $thumb400.RelPermalink }}" fetchpriority="high">
      {{ end }}
    {{ end }}
  {{ end }}

  {{/* Tailwind CSS via Hugo Pipes */}}
  {{ $css := resources.Get "css/main.css" | css.TailwindCSS }}
  {{ if hugo.IsProduction }}
    {{ $css = $css | minify | fingerprint }}
  {{ end }}

  {{/* Critical CSS inline - expanded for hero section to prevent CLS */}}
  <style>
    :root{--font-family-serif:'Cormorant Garamond',Georgia,serif;--font-family-sans:'Lora',Georgia,serif}
    html{scroll-behavior:smooth}
    body{font-family:var(--font-family-sans);margin:0;min-height:100vh;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    .dark{color-scheme:dark}
    body{background-color:#fafaf9;color:#1c1917}
    .dark body{background-color:#1c1917;color:#f5f5f4}
    /* Layout utilities */
    .flex{display:flex}.flex-col{flex-direction:column}.min-h-screen{min-height:100vh}.flex-1{flex:1 1 0%}
    .items-center{align-items:center}.justify-center{justify-content:center}.text-center{text-align:center}
    .relative{position:relative}.z-10{z-index:10}.mx-auto{margin-left:auto;margin-right:auto}
    .w-full{width:100%}.min-h-screen{min-height:100vh}.max-w-4xl{max-width:56rem}
    /* Spacing for hero */
    .px-6{padding-left:1.5rem;padding-right:1.5rem}.py-24{padding-top:6rem;padding-bottom:6rem}
    .mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}
    /* Typography for hero - prevent font-swap shifts */
    .text-xs{font-size:0.75rem;line-height:1rem}.text-xl{font-size:1.25rem;line-height:1.75rem}
    .text-6xl{font-size:3.75rem;line-height:1}.tracking-tighter{letter-spacing:-0.05em}
    .tracking-wide{letter-spacing:0.025em}.font-medium{font-weight:500}.font-light{font-weight:300}
    .font-mono{font-family:ui-monospace,SFMono-Regular,monospace}.uppercase{text-transform:uppercase}
    /* Colors - light mode base */
    .bg-white{background-color:#fff}.text-stone-900{color:#1c1917}.text-stone-400{color:#a8a29e}.text-stone-500{color:#78716c}
    /* Dark mode - using Tailwind v4 escaped class names */
    .dark .dark\:bg-stone-950{background-color:#0c0a09}.dark .dark\:text-stone-50{color:#fafaf9}
    .dark .dark\:text-stone-400{color:#a8a29e}.dark .dark\:border-stone-900{border-color:#1c1917}
    .bg-stone-400{background-color:#a8a29e}
    .font-serif{font-family:var(--font-family-serif)}
    /* Hero line */
    .h-px{height:1px}.w-24{width:6rem}
    /* Responsive hero text */
    @media(min-width:768px){.md\:py-40{padding-top:10rem;padding-bottom:10rem}.md\:text-8xl{font-size:6rem;line-height:1}.md\:text-2xl{font-size:1.5rem;line-height:2rem}}
    @media(min-width:1024px){.lg\:py-48{padding-top:12rem;padding-bottom:12rem}.lg\:text-9xl{font-size:8rem;line-height:1}}
    /* Border for hero */
    .border-b{border-bottom-width:1px}.border-stone-100{border-color:#f5f5f4}
    /* Inline-block for badge */
    .inline-block{display:inline-block}
  </style>

  {{/* Load CSS synchronously - CLS prevention is more important than render-blocking */}}
  <link rel="stylesheet" href="{{ $css.RelPermalink }}" {{ if hugo.IsProduction }}integrity="{{ $css.Data.Integrity }}"{{ end }}>

  {{/* Theme Script (must be in head to prevent flash and CLS) */}}
  <script>
    (() => {
      const stored = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const shouldBeDark = stored === 'dark' || (stored === null && prefersDark);
      if (shouldBeDark) {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>

  {{ block "head" . }}{{ end }}
</head>
<body class="min-h-screen bg-stone-50 dark:bg-stone-900 text-stone-900 dark:text-stone-100 antialiased">
  <div class="flex min-h-screen flex-col">
    {{ partial "header.html" . }}

    <main class="flex-1">
      {{ block "main" . }}{{ end }}
    </main>

    {{ partial "footer.html" . }}
  </div>

  {{ block "scripts" . }}{{ end }}

  <!-- Dark Mode Toggle Handler -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toggle = document.getElementById('theme-toggle');
      if (toggle) {
        toggle.addEventListener('click', () => {
          const isDark = document.documentElement.classList.toggle('dark');
          localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });
      }
    });
  </script>
</body>
</html>
