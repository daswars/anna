{{ define "main" }}
{{/* Sculptures Gallery - Design OS SculpturesGallery style with Lightbox */}}
<div class="min-h-screen bg-stone-50 dark:bg-stone-950">
  <main class="max-w-7xl mx-auto px-6 lg:px-12 py-16 md:py-24">

    {{ $allSculptures := .Site.Data.sculptures.sculptures }}

    {{/* Section Header */}}
    <div class="relative mb-12 md:mb-16">
      <h1 class="text-8xl md:text-9xl lg:text-[12rem] font-extralight text-stone-200/80 dark:text-stone-800/80 leading-none select-none -ml-2 md:-ml-4">
        {{ if eq $.Site.Language.Lang "de" }}Skulpturen{{ else }}Sculptures{{ end }}
      </h1>
      {{/* Subtle accent line */}}
      <div class="absolute bottom-4 left-0 w-16 h-px bg-stone-300 dark:bg-stone-700"></div>
    </div>

    {{/* Artwork Grid */}}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-6 md:gap-x-8 gap-y-12 md:gap-y-16">
      {{ range $index, $sculpture := $allSculptures }}
      {{/* Artwork Card - using shared partial */}}
      {{ partial "_artwork-card.html" (dict
        "artwork" $sculpture
        "index" $index
        "lang" $.Site.Language.Lang
        "context" $
        "type" "button"
        "showDimensions" true
      ) }}
      {{ end }}
    </div>

    {{/* Gallery Footer */}}
    <footer class="mt-32 pt-8 border-t border-stone-200 dark:border-stone-800">
      <p class="text-sm text-stone-400 dark:text-stone-600 tracking-wider">
        {{ len $allSculptures }} {{ if eq $.Site.Language.Lang "de" }}Werke{{ else }}works{{ end }}
      </p>
    </footer>

  </main>
</div>

{{/* Include Lightbox */}}
{{ partial "lightbox.html" . }}

{{/* Initialize Lightbox with artwork data - Hugo generates optimized URLs */}}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    initLightbox([
      {{ range $allSculptures }}
      {{- $assetPath := replace .image "/images/" "images/" -}}
      {{- $img := resources.Get $assetPath -}}
      {{- if $img -}}
      {{- $largeImg := $img.Resize "1600x webp q90" -}}
      {
        id: "{{ .id }}",
        title_de: "{{ .title_de }}",
        title_en: "{{ .title_en }}",
        year: {{ .year }},
        medium_de: "{{ .medium_de }}",
        medium_en: "{{ .medium_en }}",
        dimensions: "{{ .dimensions }}",
        image: "{{ $largeImg.RelPermalink }}"
      },
      {{- end -}}
      {{ end }}
    ]);
  });
</script>
{{ end }}
