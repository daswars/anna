{{ define "main" }}
{{/* Texts page - Design OS TextsList style */}}
<div class="min-h-screen px-6 py-24 md:py-32 bg-white dark:bg-stone-950 text-stone-900 dark:text-stone-50">
  <div class="max-w-3xl mx-auto">
    {{/* Page Title */}}
    <h1 class="text-5xl md:text-7xl font-light text-stone-900 dark:text-stone-50 mb-24 tracking-tight">
      {{ if eq .Site.Language.Lang "de" }}Texte{{ else }}Texts{{ end }}
    </h1>

    {{ $texts := .Site.Data.texts.texts }}
    {{ if $texts }}
    <div class="space-y-24">
      {{ range $texts }}
      <article class="group border-t border-stone-200 dark:border-stone-800 pt-8 transition-colors hover:border-stone-400 dark:hover:border-stone-600">
        {{/* Meta info */}}
        <div class="flex items-center gap-4 text-xs font-mono tracking-widest text-stone-500 dark:text-stone-500 mb-6 uppercase">
          <time datetime="{{ .date }}">
            {{ if eq $.Site.Language.Lang "de" }}
              {{ dateFormat "January 2006" .date }}
            {{ else }}
              {{ dateFormat "January 2006" .date }}
            {{ end }}
          </time>
          <span>—</span>
          <span>
            {{ if eq .type "artist-statement" }}
              {{ if eq $.Site.Language.Lang "de" }}Künstlerstatement{{ else }}Artist Statement{{ end }}
            {{ else if eq .type "essay" }}
              Essay
            {{ else }}
              {{ .type }}
            {{ end }}
          </span>
        </div>

        {{/* Title */}}
        <h2 class="text-3xl md:text-4xl font-normal text-stone-900 dark:text-stone-50 mb-6 leading-tight group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors">
          {{ if eq $.Site.Language.Lang "de" }}{{ .title_de }}{{ else }}{{ .title_en }}{{ end }}
        </h2>

        {{/* Author if not the artist */}}
        {{ if and .author (ne .author "Anna Weber") }}
        <p class="text-sm text-stone-500 dark:text-stone-400 mb-6 font-mono">
          {{ if eq $.Site.Language.Lang "de" }}von{{ else }}by{{ end }} {{ .author }}
        </p>
        {{ end }}

        {{/* Content - first paragraph as excerpt */}}
        {{ $content := "" }}
        {{ if eq $.Site.Language.Lang "de" }}
          {{ $content = .content_de }}
        {{ else }}
          {{ $content = .content_en }}
        {{ end }}

        {{/* Split content into paragraphs and show first one */}}
        <div class="text-lg text-stone-600 dark:text-stone-400 leading-relaxed mb-8 font-light max-w-2xl prose prose-stone dark:prose-invert">
          {{ $paragraphs := split $content "\n\n" }}
          {{ if $paragraphs }}
            <p>{{ index $paragraphs 0 | truncate 200 }}</p>
          {{ end }}
        </div>

        {{/* Read more link */}}
        <a href="#text-{{ .id }}" class="inline-flex items-center gap-3 text-sm font-mono uppercase tracking-widest text-stone-900 dark:text-stone-100 group-hover:text-stone-600 dark:group-hover:text-stone-400 transition-colors">
          <span>{{ if eq $.Site.Language.Lang "de" }}Weiterlesen{{ else }}Read more{{ end }}</span>
          <span class="transition-transform group-hover:translate-x-2">&rarr;</span>
        </a>
      </article>
      {{ end }}
    </div>

    {{/* Full texts (expandable sections) */}}
    <div class="mt-32 pt-16 border-t border-stone-200 dark:border-stone-800">
      <h2 class="text-2xl font-light text-stone-900 dark:text-stone-50 mb-16">
        {{ if eq .Site.Language.Lang "de" }}Vollständige Texte{{ else }}Full Texts{{ end }}
      </h2>

      {{ range $texts }}
      <article id="text-{{ .id }}" class="mb-24 scroll-mt-24">
        <h3 class="text-2xl md:text-3xl font-normal text-stone-900 dark:text-stone-50 mb-4 leading-tight">
          {{ if eq $.Site.Language.Lang "de" }}{{ .title_de }}{{ else }}{{ .title_en }}{{ end }}
        </h3>

        {{ if and .author (ne .author "Anna Weber") }}
        <p class="text-sm text-stone-500 dark:text-stone-400 mb-8 font-mono">
          {{ if eq $.Site.Language.Lang "de" }}von{{ else }}by{{ end }} {{ .author }}
        </p>
        {{ end }}

        <div class="prose prose-stone dark:prose-invert prose-lg max-w-none font-light leading-loose text-stone-700 dark:text-stone-300">
          {{ $content := "" }}
          {{ if eq $.Site.Language.Lang "de" }}
            {{ $content = .content_de }}
          {{ else }}
            {{ $content = .content_en }}
          {{ end }}
          {{ $content | markdownify }}
        </div>
      </article>
      {{ end }}
    </div>
    {{ else }}
    <p class="text-stone-500 dark:text-stone-400">
      {{ if eq .Site.Language.Lang "de" }}Noch keine Texte vorhanden.{{ else }}No texts available yet.{{ end }}
    </p>
    {{ end }}
  </div>
</div>
{{ end }}
